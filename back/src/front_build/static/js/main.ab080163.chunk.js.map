{"version":3,"sources":["components/common/Button.jsx","components/common/Input.jsx","components/common/Text.jsx","components/common/Flex.jsx","pages/LoginPage.jsx","components/Room/Room.jsx","helpers/index.js","pages/LobbyPage.jsx","components/Game/defaultGamedata.js","components/Game/Game.jsx","components/common/Checkbox.jsx","pages/RoomPage.jsx","App.jsx","store/api/apiRequests.js","index.js","store/initStore.js","store/api/api.js"],"names":["Button","props","children","onClick","className","Input","value","onChange","placeholder","type","e","target","Text","ellipsis","classNames","push","join","Flex","justify","direction","alignItems","withoutGap","LoginPage","store","useState","username","changeUsername","Fragment","login","Room","players","isFull","isStarted","Object","values","map","player","id","bindArgs","fn","args","bind","LobbyPage","observer","useEffect","getRooms","handleJoinRoom","joinRoom","rooms","room","isActive","createRoom","defultGamedata","Game","gamedata","losed","wined","row","i","cell","j","boxClassName","Checkbox","checked","RoomPage","withPenalty","changeWithPenalty","mainGamedata","otherGamedata","entries","game","score","filter","Boolean","handleKeyDown","code","gameAction","document","addEventListener","removeEventListener","isMy","currentRoom","isSoloGame","length","roomOwner","leaveRoom","startGame","infMode","App","exact","path","to","io","data","emit","observable","currentFigure","setGamedata","setCurrentFigure","setUsername","setRooms","setCurrentRoom","reducers","api","on","roomId","initApi","SocketIOClient","assign","initStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ab080163.chunk.js","sourcesContent":["import React from 'react'\n\nexport const Button = props => {\n    const {\n        children,\n        onClick\n    } = props\n\n    return <button\n        className='block button'\n        onClick={ onClick }\n    >\n        { children }\n    </button>\n}\n","import React from 'react'\nimport './style.css'\n\nexport const Input = (props) => {\n    const {\n        value,\n        onChange,\n        placeholder\n    } = props\n\n    const handleChange = e => {\n        if (onChange) {\n            onChange(e.target.value)\n        }\n    }\n\n    return <input\n        className='block input'\n        type='text'\n        value={ value }\n        placeholder={ placeholder }\n        onChange={ handleChange }\n    />\n}\n","import React from 'react'\nimport './style.css'\n\nexport const Text = (props) => {\n    const {\n        children,\n        ellipsis,\n        className\n    } = props\n\n    const classNames = [className, 'text']\n\n    if (ellipsis) {\n        classNames.push('ellipsis')\n    }\n\n    return <p className={ classNames.join(' ') }>{ children }</p>\n}\n","import React from 'react'\nimport './style.css'\n\nexport const Flex = props => {\n    const {\n        justify = 'between',\n        direction = 'row',\n        children,\n        alignItems = 'stretch',\n        className,\n        withoutGap\n    } = props\n\n    const classNames = [className]\n\n    classNames.push(direction === 'column' ? 'flex-column' : 'flex-row')\n\n    switch (alignItems) {\n        case 'center':\n            classNames.push('flex-align-center')\n            break\n        case 'start':\n            classNames.push('flex-align-start')\n            break\n        case 'stretch':\n            classNames.push('flex-align-stretch')\n            break\n        default:\n            break\n    }\n\n    switch (justify) {\n        case 'center':\n            classNames.push('flex-justify-center')\n            break\n        case 'start':\n            classNames.push('flex-justify-start')\n            break\n        case 'between':\n            classNames.push('flex-justify-between')\n            break\n        default:\n            break\n    }\n\n    if (!withoutGap) {\n        classNames.push('flex-gap')\n    }\n    \n    return <div\n        className={ classNames.join(' ') }\n    >\n        { children }\n    </div>\n}\n","import React, { useState } from 'react'\nimport { Button } from '../components/common/Button'\nimport { Input } from '../components/common/Input'\nimport { Text } from '../components/common/Text'\nimport { Flex } from '../components/common/Flex'\n\n\nexport const LoginPage = ({ store }) => {\n    const [username, changeUsername] = useState('')\n\n    const handleLogin = () => {\n        if (!store || !username) {\n            return\n        }\n\n        store.login({ username })\n    }\n\n    return <React.Fragment>\n        <Flex direction='column'>\n            <Text>Enter your name</Text>\n            <Input placeholder='Nagibator_9000' value={ username } onChange={ changeUsername } />\n            <Button onClick={ handleLogin }>LOGIN</Button>\n        </Flex>\n    </React.Fragment>\n}\n","import React from 'react'\nimport { Flex } from '../common/Flex'\nimport './style.css'\n\nexport const Room = props => {\n    const {\n        players = [],\n        isFull,\n        isStarted,\n        onClick,\n    } = props\n\n    const classNames = ['room']\n\n    if (isFull || isStarted) {\n        classNames.push('unavailable')\n    }\n\n    return <div className={ classNames.join(' ') } onClick={ onClick }>\n        <Flex direction='column' alignItems='start'>\n            { Object.values(players).map(player => <div key={ player.id }>{ player.username }</div>) }\n            { isFull && <div className='warning'>This room is already full</div> }\n            { isStarted && <div className='warning'>this room is already playing</div> }\n        </Flex>\n    </div>\n}\n","export const bindArgs = (fn, ...args) => {\n    return fn.bind(null, ...args)\n}\n","import { observer } from 'mobx-react'\nimport React, { useEffect } from 'react'\nimport { Button } from '../components/common/Button'\nimport { Flex } from '../components/common/Flex'\nimport { Text } from '../components/common/Text'\nimport { Room } from '../components/Room/Room'\nimport { bindArgs } from '../helpers'\n\nimport './Lobby.css'\n\nexport const LobbyPage = observer(({ store }) => {\n\n    useEffect(() => {\n        store.getRooms()\n    }, [store])\n\n    const handleCreateRoom = () => {\n        store.createRoom()\n    }\n\n    const handleJoinRoom = id => {\n        store.joinRoom({ id })\n    }\n\n    return <div className='lobby'>\n        <Flex direction='column'>\n            <Text>Hello, { store.username }</Text>\n            <Text>Choose room or create your own one</Text>\n            <Flex className='roomsList' direction='column' justify='start'>\n                { store.rooms && store.rooms.map(room => \n                    <Room\n                        key={ room.id }\n                        players={ Object.values(room.players) }\n                        isFull={ room.isFull }\n                        isStarted={ room.isActive }\n                        onClick={ room.isFull || room.isStarted ? null : bindArgs(handleJoinRoom, room.id) }\n                    />\n                ) }\n            </Flex>\n            <Button onClick={ handleCreateRoom }>Create room</Button>\n        </Flex>\n    </div>\n})\n","export const defultGamedata = [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n]\n","import React from 'react'\n\nimport './Game.css'\n\nimport { defultGamedata } from './defaultGamedata'\n\nexport const Game = props => {\n\n    const {\n        gamedata = defultGamedata,\n        losed,\n        wined\n    } = props\n\n    return <React.Fragment>\n\n        <div className='container' data-testid='game'>\n            { /* хак для высоты, зависимой от ширины */ }\n            <div className='content' />\n\n            <div className='grid'>\n                { gamedata.map((row, i) => row.map((cell, j) => {\n                    const boxClassName = cell === 0 ? 'box' : 'filled-box'\n\n                    return <div key={ `cell${i}*${j}` } className={ boxClassName } />\n                })) }\n            </div>\n\n            { losed && <div className='verdict losed'>LOSE</div>}\n            { wined && <div className='verdict wined'>WIN</div>}\n\n        </div>\n        \n    </React.Fragment>\n}\n","import React from 'react'\n\nexport const Checkbox = props => {\n    const {\n        checked,\n        onClick\n    } = props\n\n    return <div className='checkboxWrapper' onClick={onClick} data-testid='checkbox' >\n        { checked && <div className='checkbox' data-testid='checkbox-checked' /> }\n    </div>\n}\n","import React, { useEffect, useState, Fragment } from 'react'\nimport { observer } from 'mobx-react'\nimport { Game } from '../components/Game/Game'\nimport { Flex } from '../components/common/Flex'\nimport { Text } from '../components/common/Text'\nimport { Button } from '../components/common/Button'\n\nimport './Room.css'\nimport { Checkbox } from '../components/common/Checkbox'\n\nexport const RoomPage = observer(props => {\n    const {\n        store,\n    } = props\n\n    const [withPenalty, changeWithPenalty] = useState(false)\n\n    const mainGamedata = store.gamedata ? store.gamedata[store.id] : void 0\n\n    const otherGamedata = store.gamedata ? Object.entries(store.gamedata).map(([id, game]) => {\n        if (id === store.id) {\n            return null\n        }\n\n        return <Flex key={`game-${ id }`} direction='column'>\n            <Flex direction='row' alignItems='center'>\n                <Text className='otherTitle' ellipsis>{ game.username }</Text>\n                <Text className='score otherTitle'>{ game.score }</Text>\n            </Flex>\n            <Game gamedata={ game.gamedata } losed={ game.losed } wined={ game.wined } />\n        </Flex>\n    }).filter(Boolean) : []\n\n    const handleStartGame = () => {\n        store.startGame({ infMode: false, withPenalty })\n    }\n\n    const handleStartGameInfMode = () => {\n        store.startGame({ infMode: true, withPenalty })\n    }\n\n    const handleChangePenalty = () => {\n        changeWithPenalty(!withPenalty)\n    }\n\n    useEffect(() => {\n        const handleKeyDown = e => {\n            if (\n                !store.gamedata\n                || !store.gamedata[store.id]\n                || store.gamedata[store.id].losed\n                || store.gamedata[store.id].wined\n                || !store.gamedata[store.id].isActive\n            ) {\n                return\n            }\n\n            switch (e.code) {\n                case 'ArrowLeft':\n                    store.gameAction({ type: 'left' })\n                    break\n                case 'ArrowRight':\n                    store.gameAction({ type: 'right' })\n                    break\n                case 'ArrowUp':\n                    store.gameAction({ type: 'rotate' })\n                    break\n                case 'ArrowDown':\n                case 'Space':\n                    store.gameAction({ type: 'drop' })\n                    break\n                default:\n                    break\n            }\n        }\n        document.addEventListener('keydown', handleKeyDown)\n        return () => {\n            document.removeEventListener('keydown', handleKeyDown)\n        };\n    }, [store]);\n\n    const isMy = store.currentRoom === store.id\n    const isActive = mainGamedata && mainGamedata.isActive\n    const isSoloGame = store.gamedata && Object.values(store.gamedata).length === 1\n    const wined = mainGamedata && mainGamedata.wined\n    const losed = mainGamedata && mainGamedata.losed\n\n    const roomOwner = (store.gamedata\n        && store.gamedata[store.currentRoom]\n        && store.gamedata[store.currentRoom].username)\n        || 'UNKNOWN'\n\n    const handleExit = () => {\n        store.leaveRoom()\n    }\n\n    return <div>\n        <Flex direction='column'>\n            <Flex direction='row' alignItems='center'>\n                <Button onClick={handleExit}>Exit</Button>\n                <Text>{ roomOwner }'s room</Text>\n            </Flex>\n            <Flex direction='row'>\n                { otherGamedata.length ? <Flex direction='column' className='otherGame' justify='start'>\n                    { otherGamedata }\n                </Flex> : null }\n                <Flex direction='column' className='mainGame'>\n                    <Flex direction='row' alignItems='center'>\n                        <Text ellipsis>{ mainGamedata && mainGamedata.username }</Text>\n                        <Text className='score'> { mainGamedata && mainGamedata.score }</Text>\n                    </Flex>\n                    <Game\n                        gamedata={ mainGamedata && mainGamedata.gamedata }\n                        losed={ losed }\n                        wined={ wined }\n                    />\n\n                    { isMy && !isActive && <Fragment>\n                        { !isSoloGame && <Fragment>\n                            <Flex direction='row' alignItems='center' justify='start'>\n                                <Checkbox onClick={ handleChangePenalty } checked={ withPenalty } />\n                                <Text>With penalty rows</Text>\n                            </Flex>\n                            <Button onClick={ handleStartGame }>Start</Button>\n                        </Fragment> }\n                        <Button onClick={ handleStartGameInfMode }>Start Inf Mode</Button>\n                    </Fragment> }\n                </Flex>\n            </Flex>\n        </Flex>\n    </div>\n})\n","import React from 'react'\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { observer } from 'mobx-react'\nimport './App.css';\n\nimport { LoginPage } from './pages/LoginPage'\nimport { LobbyPage } from './pages/LobbyPage'\nimport { RoomPage } from './pages/RoomPage'\n\nconst App = observer(({ store }) => {\n  return (\n    <div className='App'>\n      <HashRouter>\n        <Switch>\n          <Route exact path='/'>\n            {store.username ? <Redirect to='/lobby' /> : <LoginPage store={store} />}\n          </Route>\n          <Route exact path='/lobby/'>\n            {!store.username ? <Redirect to='/' />\n              : store.currentRoom ? <Redirect to={`/room/${store.currentRoom}`} />\n                : <LobbyPage store={store} />}\n          </Route>\n          <Route exact path='/room/:id'>\n            {!store.username ? <Redirect to='/' />\n              : store.currentRoom ? <RoomPage store={store} />\n                : <Redirect to='/lobby' />}\n          </Route>\n          \n        </Switch>\n      </HashRouter>\n    </div>\n  )\n})\n\nexport default App;\n","export const login = (io, data) => {\n    io.emit('login', data )\n}\n\nexport const createRoom = (io) => {\n    io.emit('createRoom')\n}\n\nexport const joinRoom = (io, data) => {\n    io.emit('joinRoom', data)\n}\n\nexport const getRooms = (io) => {\n    io.emit('getRooms')\n}\n\nexport const startGame = (io, data) => {\n    io.emit('startGame', data)\n}\n\nexport const gameAction = (io, data) => {\n    io.emit('gameAction', data)\n}\n\nexport const leaveRoom = (io) => {\n    io.emit('leaveRoom')\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { initStore } from './store/initStore'\n\nconst store = initStore()\n\nReactDOM.render(\n  <React.StrictMode>\n    <App store={store} />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","import { observable } from 'mobx'\nimport { bindArgs } from '../helpers'\nimport { initApi } from './api/api'\nimport SocketIOClient from 'socket.io-client';\n\nconst URL = 'ws://localhost:9000'\n\nexport const initStore = () => {\n\n    const store = observable({})\n\n    store.username = null\n    store.id = null\n    store.gamedata = null\n    store.currentFigure = null\n    store.rooms = null\n    store.currentRoom = null\n\n    const setGamedata = bindArgs((store, gamedata) => {\n        store.gamedata = gamedata\n    }, store)\n\n    const setCurrentFigure = bindArgs((store, currentFigure) => {\n        store.currentFigure = currentFigure\n    }, store)\n\n    const setUsername = bindArgs((store, id, username) => {\n        store.id = id\n        store.username = username\n    }, store)\n\n    const setRooms = bindArgs((store, rooms) => {\n        store.rooms = rooms\n    }, store)\n\n    const setCurrentRoom = bindArgs((store, currentRoom) => {\n        store.currentRoom = currentRoom\n    }, store)\n\n    const reducers = {\n        setGamedata,\n        setUsername,\n        setCurrentFigure,\n        setRooms,\n        setCurrentRoom\n    }\n    const io = SocketIOClient(URL)\n\n    const api = initApi(io, reducers)\n\n    Object.assign(store, api)\n\n    return store\n}\n","import {\n  login,\n  createRoom,\n  joinRoom,\n  getRooms,\n  startGame,\n  gameAction,\n  leaveRoom,\n} from './apiRequests'\n\nimport { bindArgs } from '../../helpers'\n\nexport const initApi = (io, reducers) => {\n\n  io.on('login', ({ username, id }) => {\n    reducers.setUsername(id, username)\n  })\n\n  io.on('getRooms', ({ rooms }) => {\n    reducers.setRooms(rooms)\n  })\n\n  io.on('join', ({ roomId }) => {\n    reducers.setCurrentRoom(roomId)\n  })\n\n  io.on('gamedata', ({ gamedata }) => {\n    reducers.setGamedata(gamedata)\n  })\n\n  return {\n    joinRoom: bindArgs(joinRoom, io),\n    login: bindArgs(login, io),\n    createRoom: bindArgs(createRoom, io),\n    getRooms: bindArgs(getRooms, io),\n    startGame: bindArgs(startGame, io),\n    gameAction: bindArgs(gameAction, io),\n    leaveRoom: bindArgs(leaveRoom, io),\n  }\n}\n"],"sourceRoot":""}